<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP Camera: ESP32 Camera</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP Camera
   </div>
   <div id="projectbrief">Program for capturing a photo and saving it to the SD card.</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ESP32 <a class="el" href="namespace_camera.html" title="Functions all related to the camera.">Camera</a> </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__r_e_a_d_m_e"></a></p>
<p>Program to take a photo with the ESP32 camera and save it to the attached SD card.</p>
<p>Written by: Caleb Willson</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Documentation</h1>
<p>Full Doxygen documentation can be found in <a href="./docs.html">docs.html</a></p>
<h1><a class="anchor" id="autotoc_md2"></a>
Usage Instructions</h1>
<p>This program is written to take a photo on boot up and write it to the SD card.</p>
<p>The file names follow the pattern: <code>IMAGE{image_number}.BIN</code>. The image number will automatically increment and is stored on the SD card in the <code>CONFIG.TXT</code> file. If the config file is deleted, a new one will be created and the numbering will start at 0.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Yellow Tint Issue</h1>
<p>When images are captured soon after the ESP32 boots up, they have a strange yellow tint to them, likely due to the camera not being warmed up yet. Obviously, this colour inaccuracy leads to problems with color calibration. To fix this, the program actually takes 10 photos in rapid succession then saves the 11th photo to the SD card. This helps midigate the yellow tint. If some yellow tint is still visible, try increasing the number of "throwaway" frames taken.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Installation Instructions</h1>
<h2><a class="anchor" id="autotoc_md5"></a>
Cloning from Github</h2>
<p>The repository and its submodules can be cloned with the following command.</p>
<div class="fragment"><div class="line">git clone --recurse-submodules https://github.com/CrWillson/ESPPhotoProcessor.git</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md6"></a>
Requirements</h2>
<p>This project was tested using:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft"><b>Dependency</b>   </th><th class="markdownTableHeadLeft"><b>Version</b>   </th><th class="markdownTableHeadLeft"><b>Download/Instructions</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><b>gcc</b>   </td><td class="markdownTableBodyLeft">14.2.0   </td><td class="markdownTableBodyLeft"><a href="https://www.freecodecamp.org/news/how-to-install-c-and-cpp-compiler-on-windows/">Instructions</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><b>cmake</b>   </td><td class="markdownTableBodyLeft">3.24.0   </td><td class="markdownTableBodyLeft"><a href="https://cmake.org/download/">Download</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><b>git</b>   </td><td class="markdownTableBodyLeft">2.39.2.windows.1   </td><td class="markdownTableBodyLeft"><a href="https://git-scm.com/download/win">Download</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><b>ESP-IDF VSCode extension</b>   </td><td class="markdownTableBodyLeft">v1.8.1   </td><td class="markdownTableBodyLeft"><a href="https://marketplace.visualstudio.com/items?itemName=espressif.esp-idf-extension">Installer</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><b>ESP-IDF Tools</b>   </td><td class="markdownTableBodyLeft">v5.3.1   </td><td class="markdownTableBodyLeft"><a href="https://docs.espressif.com/projects/esp-idf/en/stable/esp32/get-started/windows-setup.html">Download</a>   </td></tr>
</table>
<p>Note that this project may work with older or newer versions of these dependencies. These are only the versions project was tested with.</p>
<p><b>The C++ and CMake VSCode extensions are also necessary.</b></p>
<blockquote class="doxtable">
<p>GCC, Cmake, and git should be installed with the default options to ensure the greatest chance of compatability. Any custom settings in these programs have not been tested or documented. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md7"></a>
ESP-IDF Tools Setup</h2>
<p>To set up the ESP-IDF toolchain:</p>
<ol type="1">
<li>Download the ESP-IDF Tools Installer listed above.</li>
<li>Scroll down to where you see <code>ESP-IDF Tools Installer</code> and click on the link labled <code>Windows Installer Download</code>.</li>
<li>Click the top download link labled <code>Universal Online Installer</code> and run the installer.</li>
<li>Continue through the installer and keep the default options and filepaths. <blockquote class="doxtable">
<p>When you reach the <b>Version of ESP-IDF</b> selection, make sure <b>v5.3.1 (release version -.zip archive download)</b> is selected. </p>
</blockquote>
</li>
</ol>
<blockquote class="doxtable">
<p>When you reach the <b>Select Components</b> page, make sure <b>Full installation</b> is selected. </p>
</blockquote>
<ol type="1">
<li>Finish the installation.</li>
</ol>
<p>If all of the options were kept as the default, there should be two important filepaths to remember: </p><div class="fragment"><div class="line"> (bash)</div>
<div class="line">C:\Espressif\frameworks\esp-idf-v5.3.1-2</div>
<div class="line">C:\Users\USERNAME\.espressif</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md8"></a>
ESP-IDF VSCode Extension Setup</h2>
<p>To set up the ESP-IDF VSCode extension:</p>
<ol type="1">
<li>Install the ESP-IDF extension from the link above or VSCode's extension manager.</li>
<li>If the configure page does not automatically open, select the new ESP-IDF icon on the lefthand column then select <code>Configure ESP-IDF Extension</code> in the lefthand commands menu.</li>
<li>Select <code>Express</code>.</li>
<li>Enter the following options:<ul>
<li>Select download server: <b>Github</b></li>
<li>Select ESP-IDFF version: <b>Find ESP-IDF in your system</b></li>
<li>Enter ESP-IDF directory (IDF_PATH): **C:\Espressif\frameworks\esp-idf-v5.3.1-2**</li>
<li>Enter ESP-IDF Tools directory (IDF_TOOLS_PATH): **C:\Users\USERNAME\.espressif**</li>
</ul>
</li>
</ol>
<ol type="1">
<li>Select <code>Install</code> and wait until you see a menu saying <code>Quick actions</code>.</li>
<li>Make sure the ESP32-Cam is plugged into the computer.</li>
<li><p class="startli">On the settings bar along the bottom of the window, do the following:</p><ol type="a">
<li>Select the icon of a plug and chose the USB port that the ESP32-Cam is plugged into. It should auto detect the ESP32 and suggest which one to use but it might not.</li>
<li>Select the star icon and choose the <code>UART</code> flash method.</li>
<li>Select the wrench icon to begin the initial build.</li>
</ol>
<p class="startli">If the project fails to build, try the following:</p><ul>
<li>Check that CMake is using the right generator:<ul>
<li>Enter the VSCode command menu (Default Key: F1)</li>
<li>Enter the command: <code>CMake: Open Cmake Tools Extension Settings</code></li>
<li>Search for the setting: <code>CMake: Generator</code></li>
<li>Enter <code>Ninja</code> into the setting.</li>
<li>Press enter to save the setting.</li>
</ul>
</li>
</ul>
</li>
</ol>
<ul>
<li>Delete the build directory:<ul>
<li>You can either do this by selecting the trash can icon on the bottom settings bar or by manually deleting the build folder in the top level directory.</li>
<li>In general, if the project fails to build, this is usually a good first step.</li>
</ul>
</li>
</ul>
<p>Settle in. <em>The first build will take a while</em>.</p>
<p>Once the first build has finished, it can be flashed to the ESP32-Cam using the lightning bolt button on the bottom settings bar. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
